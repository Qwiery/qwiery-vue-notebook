<template>
	<div :class="{ 'bg-gray-400': hasHighlight }">
		<div v-if="cell.direction === 'input'" @click="setFocus()" class=" border-gray-500 p-2">
			<div class="flex">
				<div v-if="executionId">
					<div class="my-2 text-gray-500 ml-1 w-max min-w-20">
						[{{ executionId }}]
					</div>
				</div>
				<div v-else>
					<div class="my-2 text-gray-500 w-max min-w-20">[ ]</div>
				</div>
				<div class="border-l-4 w-full dark:bg-[#333] bg-gray-100" :class="{
                'border-l-gray-500': !props.hasFocus,
                'border-l-green-500': props.hasFocus,
              }">
					<div class="flex" v-if="hasFocus">
						<div class="w-full dark:bg-[#666] bg-gray-200 ml-0">
							<div class="grid-container">
								<div class="col-start-5 m-1 flex">
									<div class="mt-1.5 flex">
										<div class="ml-1 cursor-pointer w-5 z-100" @click="runCell()">
											<svg width="12px" height="12px" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
												<g>
													<path d="M15.795 11.272L7.795 16.272C6.79593 16.8964 5.5 16.1782 5.5 15L5.5 5.00002C5.5 3.82186 6.79593 3.1036 7.795 3.72802L15.795 8.72802C16.735 9.31552 16.735 10.6845 15.795 11.272Z" fill="#000000"></path>
												</g>
											</svg>
										</div>
										<div class="ml-1 cursor-pointer w-5 z-100" @click="bigger()">
											<svg width="12px" height="12px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#000000">
												<g>
													<path fill="#000000" fill-rule="evenodd"
														  d="M521.667563,212.999001 L523.509521,212.999001 C523.784943,212.999001 524,213.222859 524,213.499001 C524,213.767068 523.780405,213.999001 523.509521,213.999001 L520.490479,213.999001 C520.354351,213.999001 520.232969,213.944316 520.145011,213.855661 C520.056625,213.763694 520,213.642369 520,213.508523 L520,210.48948 C520,210.214059 520.223858,209.999001 520.5,209.999001 C520.768066,209.999001 521,210.218596 521,210.48948 L521,212.252351 L525.779724,207.472627 C525.975228,207.277123 526.284966,207.283968 526.480228,207.47923 C526.66978,207.668781 526.678447,207.988118 526.486831,208.179734 L521.667563,212.999001 Z M534.330152,212.999001 L532.488194,212.999001 C532.212773,212.999001 531.997715,213.222859 531.997715,213.499001 C531.997715,213.767068 532.21731,213.999001 532.488194,213.999001 L535.507237,213.999001 C535.643364,213.999001 535.764746,213.944316 535.852704,213.855661 C535.94109,213.763694 535.997715,213.642369 535.997715,213.508523 L535.997715,210.48948 C535.997715,210.214059 535.773858,209.999001 535.497715,209.999001 C535.229649,209.999001 534.997715,210.218596 534.997715,210.48948 L534.997715,212.252351 L530.217991,207.472627 C530.022487,207.277123 529.712749,207.283968 529.517487,207.47923 C529.327935,207.668781 529.319269,207.988118 529.510884,208.179734 L534.330152,212.999001 Z M521.667563,199 L523.509521,199 C523.784943,199 524,198.776142 524,198.5 C524,198.231934 523.780405,198 523.509521,198 L520.490479,198 C520.354351,198 520.232969,198.054685 520.145011,198.14334 C520.056625,198.235308 520,198.356632 520,198.490479 L520,201.509521 C520,201.784943 520.223858,202 520.5,202 C520.768066,202 521,201.780405 521,201.509521 L521,199.74665 L525.779724,204.526374 C525.975228,204.721878 526.284966,204.715034 526.480228,204.519772 C526.66978,204.33022 526.678447,204.010883 526.486831,203.819268 L521.667563,199 Z M534.251065,199 L532.488194,199 C532.212773,199 531.997715,198.776142 531.997715,198.5 C531.997715,198.231934 532.21731,198 532.488194,198 L535.507237,198 C535.643364,198 535.764746,198.054685 535.852704,198.14334 C535.94109,198.235308 535.997715,198.356632 535.997715,198.490479 L535.997715,201.509521 C535.997715,201.784943 535.773858,202 535.497715,202 C535.229649,202 534.997715,201.780405 534.997715,201.509521 L534.997715,199.667563 L530.178448,204.486831 C529.982944,204.682335 529.673206,204.67549 529.477943,204.480228 C529.288392,204.290677 529.279725,203.97134 529.471341,203.779724 L534.251065,199 Z"
														  transform="translate(-520 -198)"></path>
												</g>
											</svg>
										</div>
										<div class="ml-1 cursor-pointer w-5 z-100" @click="smaller()">
											<svg width="12px" height="12px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#000000">
												<g>
													<path fill="#000000" fill-rule="evenodd"
														  d="M622.667563,208 L624.509521,208 C624.784943,208 625,207.776142 625,207.5 C625,207.231934 624.780405,207 624.509521,207 L621.490479,207 C621.354351,207 621.232969,207.054685 621.145011,207.14334 C621.056625,207.235308 621,207.356632 621,207.490479 L621,210.509521 C621,210.784943 621.223858,211 621.5,211 C621.768066,211 622,210.780405 622,210.509521 L622,208.74665 L626.779724,213.526374 C626.975228,213.721878 627.284966,213.715034 627.480228,213.519772 C627.66978,213.33022 627.678447,213.010883 627.486831,212.819268 L622.667563,208 Z M616.958961,208 L615.117003,208 C614.841582,208 614.626525,207.776142 614.626525,207.5 C614.626525,207.231934 614.846119,207 615.117003,207 L618.136046,207 C618.272174,207 618.393556,207.054685 618.481514,207.14334 C618.569899,207.235308 618.626525,207.356632 618.626525,207.490479 L618.626525,210.509521 C618.626525,210.784943 618.402667,211 618.126525,211 C617.858458,211 617.626525,210.780405 617.626525,210.509521 L617.626525,208.74665 L612.8468,213.526374 C612.651296,213.721878 612.341558,213.715034 612.146296,213.519772 C611.956745,213.33022 611.948078,213.010883 612.139694,212.819268 L616.958961,208 Z M622.667563,203.669654 L624.509521,203.669654 C624.784943,203.669654 625,203.893511 625,204.169654 C625,204.43772 624.780405,204.669654 624.509521,204.669654 L621.490479,204.669654 C621.354351,204.669654 621.232969,204.614968 621.145011,204.526313 C621.056625,204.434346 621,204.313021 621,204.179175 L621,201.160132 C621,200.884711 621.223858,200.669654 621.5,200.669654 C621.768066,200.669654 622,200.889248 622,201.160132 L622,202.923004 L626.779724,198.143279 C626.975228,197.947775 627.284966,197.95462 627.480228,198.149882 C627.66978,198.339434 627.678447,198.658771 627.486831,198.850386 L622.667563,203.669654 Z M616.958961,203.669654 L615.117003,203.669654 C614.841582,203.669654 614.626525,203.893511 614.626525,204.169654 C614.626525,204.43772 614.846119,204.669654 615.117003,204.669654 L618.136046,204.669654 C618.272174,204.669654 618.393556,204.614968 618.481514,204.526313 C618.569899,204.434346 618.626525,204.313021 618.626525,204.179175 L618.626525,201.160132 C618.626525,200.884711 618.402667,200.669654 618.126525,200.669654 C617.858458,200.669654 617.626525,200.889248 617.626525,201.160132 L617.626525,202.923004 L612.8468,198.143279 C612.651296,197.947775 612.341558,197.95462 612.146296,198.149882 C611.956745,198.339434 611.948078,198.658771 612.139694,198.850386 L616.958961,203.669654 Z"
														  transform="translate(-612 -198)"></path>
												</g>
											</svg>
										</div>
										<div class="ml-1 mt-0 cursor-pointer" @click="deleteCell()">
											<svg title="Delete cell" fill="#000000" width="12px" height="12px" viewBox="-2.94 0 31.716 31.716" xmlns="http://www.w3.org/2000/svg">
												<g>
													<g transform="translate(-355.957 -579)">
														<path
															d="M376.515,610.716H361.231a2.361,2.361,0,0,1-2.358-2.359V584.1a1,1,0,0,1,2,0v24.255a.36.36,0,0,0,.358.359h15.284a.36.36,0,0,0,.358-.359V584.1a1,1,0,0,1,2,0v24.255A2.361,2.361,0,0,1,376.515,610.716Z"
														></path>
														<path
															d="M365.457,604.917a1,1,0,0,1-1-1v-14a1,1,0,0,1,2,0v14A1,1,0,0,1,365.457,604.917Z"
														></path>
														<path
															d="M372.29,604.917a1,1,0,0,1-1-1v-14a1,1,0,0,1,2,0v14A1,1,0,0,1,372.29,604.917Z"
														></path>
														<path
															d="M380.79,585.1H356.957a1,1,0,0,1,0-2H380.79a1,1,0,0,1,0,2Z"
														></path>
														<path
															d="M372.79,581h-7.917a1,1,0,1,1,0-2h7.917a1,1,0,0,1,0,2Z"
														></path>
													</g>
												</g>
											</svg>
										</div>
									</div>
									<div class="ml-1 mt-0 cursor-pointer">
										<Menu as="div" class="relative inline-block text-left">
											<div>
												<MenuButton class="bg-transparent w-[16px] h-[16px] m-1 p-0">
													<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
														<circle cx="12" cy="12" r="3" stroke="#1C274C" stroke-width="1.5" />
														<path
															opacity="0.5"
															d="M13.7654 2.15224C13.3978 2 12.9319 2 12 2C11.0681 2 10.6022 2 10.2346 2.15224C9.74457 2.35523 9.35522 2.74458 9.15223 3.23463C9.05957 3.45834 9.0233 3.7185 9.00911 4.09799C8.98826 4.65568 8.70226 5.17189 8.21894 5.45093C7.73564 5.72996 7.14559 5.71954 6.65219 5.45876C6.31645 5.2813 6.07301 5.18262 5.83294 5.15102C5.30704 5.08178 4.77518 5.22429 4.35436 5.5472C4.03874 5.78938 3.80577 6.1929 3.33983 6.99993C2.87389 7.80697 2.64092 8.21048 2.58899 8.60491C2.51976 9.1308 2.66227 9.66266 2.98518 10.0835C3.13256 10.2756 3.3397 10.437 3.66119 10.639C4.1338 10.936 4.43789 11.4419 4.43786 12C4.43783 12.5581 4.13375 13.0639 3.66118 13.3608C3.33965 13.5629 3.13248 13.7244 2.98508 13.9165C2.66217 14.3373 2.51966 14.8691 2.5889 15.395C2.64082 15.7894 2.87379 16.193 3.33973 17C3.80568 17.807 4.03865 18.2106 4.35426 18.4527C4.77508 18.7756 5.30694 18.9181 5.83284 18.8489C6.07289 18.8173 6.31632 18.7186 6.65204 18.5412C7.14547 18.2804 7.73556 18.27 8.2189 18.549C8.70224 18.8281 8.98826 19.3443 9.00911 19.9021C9.02331 20.2815 9.05957 20.5417 9.15223 20.7654C9.35522 21.2554 9.74457 21.6448 10.2346 21.8478C10.6022 22 11.0681 22 12 22C12.9319 22 13.3978 22 13.7654 21.8478C14.2554 21.6448 14.6448 21.2554 14.8477 20.7654C14.9404 20.5417 14.9767 20.2815 14.9909 19.902C15.0117 19.3443 15.2977 18.8281 15.781 18.549C16.2643 18.2699 16.8544 18.2804 17.3479 18.5412C17.6836 18.7186 17.927 18.8172 18.167 18.8488C18.6929 18.9181 19.2248 18.7756 19.6456 18.4527C19.9612 18.2105 20.1942 17.807 20.6601 16.9999C21.1261 16.1929 21.3591 15.7894 21.411 15.395C21.4802 14.8691 21.3377 14.3372 21.0148 13.9164C20.8674 13.7243 20.6602 13.5628 20.3387 13.3608C19.8662 13.0639 19.5621 12.558 19.5621 11.9999C19.5621 11.4418 19.8662 10.9361 20.3387 10.6392C20.6603 10.4371 20.8675 10.2757 21.0149 10.0835C21.3378 9.66273 21.4803 9.13087 21.4111 8.60497C21.3592 8.21055 21.1262 7.80703 20.6602 7C20.1943 6.19297 19.9613 5.78945 19.6457 5.54727C19.2249 5.22436 18.693 5.08185 18.1671 5.15109C17.9271 5.18269 17.6837 5.28136 17.3479 5.4588C16.8545 5.71959 16.2644 5.73002 15.7811 5.45096C15.2977 5.17191 15.0117 4.65566 14.9909 4.09794C14.9767 3.71848 14.9404 3.45833 14.8477 3.23463C14.6448 2.74458 14.2554 2.35523 13.7654 2.15224Z"
															stroke="#1C274C"
															stroke-width="1.5"
														/>
													</svg>
												</MenuButton>
											</div>
											<transition
												enter-active-class="transition duration-100 ease-out"
												enter-from-class="transform scale-95 opacity-0"
												enter-to-class="transform scale-100 opacity-100"
												leave-active-class="transition duration-75 ease-in"
												leave-from-class="transform scale-100 opacity-100"
												leave-to-class="transform scale-95 opacity-0"
											>
												<MenuItems class="absolute right-0 mt-2 w-36 origin-top-right divide-y divide-gray-100 rounded-sm bg-white shadow-sm ring-1 ring-black/5 focus:outline-none z-[300]">
													<div class="px-1 py-1">
														<MenuItem v-slot="{ active }">
															<div class="m-2 text-xs flex" @click="runCell()">
																<svg width="12px" height="12px" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
																	<g>
																		<path d="M15.795 11.272L7.795 16.272C6.79593 16.8964 5.5 16.1782 5.5 15L5.5 5.00002C5.5 3.82186 6.79593 3.1036 7.795 3.72802L15.795 8.72802C16.735 9.31552 16.735 10.6845 15.795 11.272Z" fill="#000000"></path>
																	</g>
																</svg>
																<span class="ml-2">Run</span></div>
														</MenuItem>
														<MenuItem v-slot="{ active }">
															<div class="m-2 text-xs flex" @click="deleteCell()">
																<svg title="Delete cell" fill="#000000" width="12px" height="12px" viewBox="-2.94 0 31.716 31.716" xmlns="http://www.w3.org/2000/svg">
																	<g>
																		<g transform="translate(-355.957 -579)">
																			<path
																				d="M376.515,610.716H361.231a2.361,2.361,0,0,1-2.358-2.359V584.1a1,1,0,0,1,2,0v24.255a.36.36,0,0,0,.358.359h15.284a.36.36,0,0,0,.358-.359V584.1a1,1,0,0,1,2,0v24.255A2.361,2.361,0,0,1,376.515,610.716Z"
																			></path>
																			<path
																				d="M365.457,604.917a1,1,0,0,1-1-1v-14a1,1,0,0,1,2,0v14A1,1,0,0,1,365.457,604.917Z"
																			></path>
																			<path
																				d="M372.29,604.917a1,1,0,0,1-1-1v-14a1,1,0,0,1,2,0v14A1,1,0,0,1,372.29,604.917Z"
																			></path>
																			<path
																				d="M380.79,585.1H356.957a1,1,0,0,1,0-2H380.79a1,1,0,0,1,0,2Z"
																			></path>
																			<path
																				d="M372.79,581h-7.917a1,1,0,1,1,0-2h7.917a1,1,0,0,1,0,2Z"
																			></path>
																		</g>
																	</g>
																</svg>
																<span class="ml-2">Delete</span></div>
														</MenuItem>
														<MenuItem v-slot="{ active }">
															<div class="m-2  text-xs flex" @click="addCell()">
																<svg width="12px" height="12px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
																	<g>
																		<circle cx="12" cy="12" r="10" stroke="#1C274C" stroke-width="1.5"></circle>
																		<path d="M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path>
																	</g>
																</svg>
																<span class="ml-2">Add</span></div>
														</MenuItem>
														<MenuItem v-slot="{ active }">
															<div class="m-2 text-xs">
																<hr>
															</div>
														</MenuItem>
														<MenuItem v-slot="{ active }">
															<div class="m-2 text-xs flex" @click="smaller()">
																<svg width="12px" height="12px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#000000">
																	<g>
																		<path fill="#000000" fill-rule="evenodd"
																			  d="M622.667563,208 L624.509521,208 C624.784943,208 625,207.776142 625,207.5 C625,207.231934 624.780405,207 624.509521,207 L621.490479,207 C621.354351,207 621.232969,207.054685 621.145011,207.14334 C621.056625,207.235308 621,207.356632 621,207.490479 L621,210.509521 C621,210.784943 621.223858,211 621.5,211 C621.768066,211 622,210.780405 622,210.509521 L622,208.74665 L626.779724,213.526374 C626.975228,213.721878 627.284966,213.715034 627.480228,213.519772 C627.66978,213.33022 627.678447,213.010883 627.486831,212.819268 L622.667563,208 Z M616.958961,208 L615.117003,208 C614.841582,208 614.626525,207.776142 614.626525,207.5 C614.626525,207.231934 614.846119,207 615.117003,207 L618.136046,207 C618.272174,207 618.393556,207.054685 618.481514,207.14334 C618.569899,207.235308 618.626525,207.356632 618.626525,207.490479 L618.626525,210.509521 C618.626525,210.784943 618.402667,211 618.126525,211 C617.858458,211 617.626525,210.780405 617.626525,210.509521 L617.626525,208.74665 L612.8468,213.526374 C612.651296,213.721878 612.341558,213.715034 612.146296,213.519772 C611.956745,213.33022 611.948078,213.010883 612.139694,212.819268 L616.958961,208 Z M622.667563,203.669654 L624.509521,203.669654 C624.784943,203.669654 625,203.893511 625,204.169654 C625,204.43772 624.780405,204.669654 624.509521,204.669654 L621.490479,204.669654 C621.354351,204.669654 621.232969,204.614968 621.145011,204.526313 C621.056625,204.434346 621,204.313021 621,204.179175 L621,201.160132 C621,200.884711 621.223858,200.669654 621.5,200.669654 C621.768066,200.669654 622,200.889248 622,201.160132 L622,202.923004 L626.779724,198.143279 C626.975228,197.947775 627.284966,197.95462 627.480228,198.149882 C627.66978,198.339434 627.678447,198.658771 627.486831,198.850386 L622.667563,203.669654 Z M616.958961,203.669654 L615.117003,203.669654 C614.841582,203.669654 614.626525,203.893511 614.626525,204.169654 C614.626525,204.43772 614.846119,204.669654 615.117003,204.669654 L618.136046,204.669654 C618.272174,204.669654 618.393556,204.614968 618.481514,204.526313 C618.569899,204.434346 618.626525,204.313021 618.626525,204.179175 L618.626525,201.160132 C618.626525,200.884711 618.402667,200.669654 618.126525,200.669654 C617.858458,200.669654 617.626525,200.889248 617.626525,201.160132 L617.626525,202.923004 L612.8468,198.143279 C612.651296,197.947775 612.341558,197.95462 612.146296,198.149882 C611.956745,198.339434 611.948078,198.658771 612.139694,198.850386 L616.958961,203.669654 Z"
																			  transform="translate(-612 -198)"></path>
																	</g>
																</svg>
																<span class="ml-2">Smaller Cell</span></div>
														</MenuItem>
														<MenuItem v-slot="{ active }">
															<div class="m-2 text-xs flex" @click="bigger()">
																<svg width="12px" height="12px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#000000">
																	<g>
																		<path fill="#000000" fill-rule="evenodd"
																			  d="M521.667563,212.999001 L523.509521,212.999001 C523.784943,212.999001 524,213.222859 524,213.499001 C524,213.767068 523.780405,213.999001 523.509521,213.999001 L520.490479,213.999001 C520.354351,213.999001 520.232969,213.944316 520.145011,213.855661 C520.056625,213.763694 520,213.642369 520,213.508523 L520,210.48948 C520,210.214059 520.223858,209.999001 520.5,209.999001 C520.768066,209.999001 521,210.218596 521,210.48948 L521,212.252351 L525.779724,207.472627 C525.975228,207.277123 526.284966,207.283968 526.480228,207.47923 C526.66978,207.668781 526.678447,207.988118 526.486831,208.179734 L521.667563,212.999001 Z M534.330152,212.999001 L532.488194,212.999001 C532.212773,212.999001 531.997715,213.222859 531.997715,213.499001 C531.997715,213.767068 532.21731,213.999001 532.488194,213.999001 L535.507237,213.999001 C535.643364,213.999001 535.764746,213.944316 535.852704,213.855661 C535.94109,213.763694 535.997715,213.642369 535.997715,213.508523 L535.997715,210.48948 C535.997715,210.214059 535.773858,209.999001 535.497715,209.999001 C535.229649,209.999001 534.997715,210.218596 534.997715,210.48948 L534.997715,212.252351 L530.217991,207.472627 C530.022487,207.277123 529.712749,207.283968 529.517487,207.47923 C529.327935,207.668781 529.319269,207.988118 529.510884,208.179734 L534.330152,212.999001 Z M521.667563,199 L523.509521,199 C523.784943,199 524,198.776142 524,198.5 C524,198.231934 523.780405,198 523.509521,198 L520.490479,198 C520.354351,198 520.232969,198.054685 520.145011,198.14334 C520.056625,198.235308 520,198.356632 520,198.490479 L520,201.509521 C520,201.784943 520.223858,202 520.5,202 C520.768066,202 521,201.780405 521,201.509521 L521,199.74665 L525.779724,204.526374 C525.975228,204.721878 526.284966,204.715034 526.480228,204.519772 C526.66978,204.33022 526.678447,204.010883 526.486831,203.819268 L521.667563,199 Z M534.251065,199 L532.488194,199 C532.212773,199 531.997715,198.776142 531.997715,198.5 C531.997715,198.231934 532.21731,198 532.488194,198 L535.507237,198 C535.643364,198 535.764746,198.054685 535.852704,198.14334 C535.94109,198.235308 535.997715,198.356632 535.997715,198.490479 L535.997715,201.509521 C535.997715,201.784943 535.773858,202 535.497715,202 C535.229649,202 534.997715,201.780405 534.997715,201.509521 L534.997715,199.667563 L530.178448,204.486831 C529.982944,204.682335 529.673206,204.67549 529.477943,204.480228 C529.288392,204.290677 529.279725,203.97134 529.471341,203.779724 L534.251065,199 Z"
																			  transform="translate(-520 -198)"></path>
																	</g>
																</svg>
																<span class="ml-2">Larger Cell</span></div>
														</MenuItem>

													</div>

												</MenuItems>
											</transition>
										</Menu>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div v-if="props.cell.message.typeName == 'CodeMessage'">
						<CodeMessageRendering :message="props.cell.message" :controller="props.controller" />
					</div>
					<div v-if="props.cell.message.typeName == 'MarkdownMessage'">
						<MarkdownMessageRendering :message="props.cell.message" :controller="props.controller" />
					</div>
				</div>
			</div>
		</div>
		<div v-else>
			<div>
				<template v-if="props.controller.view === 'default'">
					<div v-if="executionId">
						<div class="w-max min-w-20 my-2 ml-1 text-gray-500">
							[{{ executionId }}]
						</div>
					</div>
					<div v-else>
						<div class="w-max min-w-20 my-2 text-gray-500">[ ]</div>
					</div>
				</template>
				<div class="cell-output">
					<div v-if="props.cell.message.typeName == 'CodeMessage'">
						<CodeMessageRendering
							:message="props.cell.message"
							direction="output"
						/>
					</div>
					<div v-if="props.cell.message.typeName == 'TextMessage'">
						<TextMessageRendering
							:message="props.cell.message"
							direction="output"
						/>
					</div>
					<div v-if="props.cell.message.typeName == 'MarkdownMessage'">
						<MarkdownMessageRendering
							:message="props.cell.message"
							direction="output"
						/>
					</div>
					<div v-if="props.cell.message.typeName == 'DataMessage'">
						<DataMessageRendering
							:message="props.cell.message"
							direction="output"
						/>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<script setup lang="ts">
	import { Menu, MenuButton, MenuItems, MenuItem } from "@headlessui/vue";
	import { computed, onMounted, ref, watch, toRef } from "vue";
	import { NotebookCell } from "@orbifold/entities";
	import CodeMessageRendering from "~/components/rendering/CodeMessageRendering.vue";
	import TextMessageRendering from "~/components/rendering/TextMessageRendering.vue";
	import MarkdownMessageRendering from "~/components/rendering/MarkdownMessageRendering.vue";
	import DataMessageRendering from "~/components/rendering/DataMessageRendering.vue";
	import { NotebookController } from "~/components/NotebookController";
	// const hasFocus = computed(() => {
	//   return props.cell.hasFocus;
	// })
	const props = defineProps({
		cell: {
			type: NotebookCell,
			required: true,
		},
		controller: {
			type: NotebookController,
			required: true,
		},
		hasFocus: {
			type: Boolean,
			required: false,
		},
		hasHighlight: {
			type: Boolean,
			required: false,
		},
	});
	const executionId = computed(() => {
		return props.cell.executionId;
	});
	const hasHighlight = toRef(props.hasHighlight);
	// watch(
	//     ()=>props.cell,
	//     (newVal) => {
	//       executionId.value = newVal.executionId||"";
	//     },
	//     { immediate: true, deep: true }
	//   );

	onMounted(() => {
		// hasFocus.value = props.cell.hasFocus;
	});

	function setFocus() {
		// hasFocus.value = true;
		props.controller.setFocus(props.cell.message.id);
	}

	function deleteCell() {
		props.controller.deleteCell(props.cell.message.id);
	}

	function runCell() {
		props.controller?.executeCell(props.cell.message);
	}

	function addCell() {
		props.controller.addCell(null, props.cell.message.id, "after", 4);
	}

	function bigger() {
		props.controller.setColSpan(props.cell.message.id, props.cell.colSpan + 1);
	}

	function smaller() {

		props.controller.setColSpan(props.cell.message.id, props.cell.colSpan - 1);
	}
</script>
